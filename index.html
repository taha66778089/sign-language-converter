<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>محوّل لغة الإشارة</title>
<style>
body {
    font-family: Arial, sans-serif;
    background: url('https://upload.wikimedia.org/wikipedia/commons/6/65/Flag_of_Qatar.svg') no-repeat center center fixed;
    background-size: cover;
    margin:0; padding:0;
    direction:rtl; text-align:center;
    overflow-x:hidden;
}

#marquee {
    font-size:36px;
    font-weight:bold;
    white-space: nowrap;
    overflow:hidden;
    display:block;
    color: transparent;
    background: linear-gradient(45deg,#ff0000,#00ff00,#0000ff,#ffff00,#ff00ff,#00ffff);
    -webkit-background-clip:text;
    background-size:300%;
    animation: marqueeMove 15s linear infinite, rainbow 5s linear infinite;
    margin:10px 0;
}
@keyframes marqueeMove {0%{transform:translateX(100%);}100%{transform:translateX(-100%);}}
@keyframes rainbow {0%{background-position:0% 50%;}50%{background-position:100% 50%;}100%{background-position:0% 50%;}}

header { position: relative; padding: 50px 0 20px 0; }

#datetime,#location{
    position:absolute; top:10px;
    font-size:18px;
    background: rgba(0,0,0,0.5);
    padding:5px 10px;
    border-radius:5px;
    color:white;
}
#datetime{left:10px;}
#location{right:10px;}

#sideTextLeft,#sideTextRight{
    position:fixed; top:50%;
    transform: translateY(-50%);
    font-size:50px; font-weight:bold;
    color: transparent;
    background: linear-gradient(45deg,#ff0000,#00ff00,#0000ff,#ffff00,#ff00ff,#00ffff);
    -webkit-background-clip:text;
    animation: rainbow 5s linear infinite alternate;
}
#sideTextLeft{left:10px;}
#sideTextRight{right:10px; animation-direction:alternate-reverse;}

.sideImage{
    width:180px; height:180px;
    margin-top:15px;
    border-radius:10px;
}

.container{
    margin:20px auto;
    padding:30px;
    background-color: rgba(255,255,255,0.95);
    border-radius:20px;
    width:85%;
    max-width:700px;
}

input[type="file"],#liveCaptureBtn{
    margin:10px;
    padding:15px 25px;
    font-size:18px;
    border-radius:10px;
    background:#2196f3;
    color:white;
    cursor:pointer;
}

button{
    background:#1976d2;
    color:white;
    border:none;
    padding:15px 40px;
    border-radius:15px;
    font-size:20px;
}

.output{
    margin-top:20px;
    padding:15px;
    background:#e3f2fd;
    border-radius:10px;
}

#footerMarquee{
    font-size:28px;
    white-space: nowrap;
    overflow:hidden;
    color: transparent;
    background: linear-gradient(45deg,#ff0000,#00ff00,#0000ff,#ffff00,#ff00ff,#00ffff);
    -webkit-background-clip:text;
    animation: marqueeMove 20s linear infinite, rainbow 5s linear infinite;
    position:fixed;
    bottom:0; width:100%;
}
</style>
</head>
<body>

<div id="sideTextLeft">إشارتي<br>هي<br>لغتي<br>
<img src="https://imgbob.net/ib/XSjj1pw9jxL9V5V_1771871852.jpg" class="sideImage">
</div>

<div id="sideTextRight">مجمع<br>التربية<br>السمعية<br>للبنات<br>
<img src="https://imgbob.net/ib/XSjj1pw9jxL9V5V_1771871852.jpg" class="sideImage">
</div>

<header>
<div id="datetime"></div>
<div id="location">الدوحة - قطر</div>
<div id="marquee">محوّل فيديو لغة الإشارة إلى نص أو صوت</div>
</header>

<div class="container">
<video id="videoPlayer" controls style="display:none;width:45%;"></video>

<h2>اختر فيديو بلغة الإشارة</h2>
<input type="file" accept="video/*" id="videoInput" onchange="previewVideo()">
<button id="liveCaptureBtn">التصوير المباشر</button>

<br>
<video id="liveVideo" autoplay style="display:none;width:45%;"></video>
<button id="stopCaptureBtn" style="display:none;">إيقاف التصوير</button>

<br><br>
<button onclick="convertVideo()">ابدأ التحويل</button>

<div class="output" id="output">
<h3>الناتج:</h3>
<p>سيظهر النص هنا بعد التحويل...</p>
</div>
</div>

<div id="footerMarquee">الموقع من إعداد / طالبات مجمع التربية السمعية للبنات</div>

<script>
let usedLiveCamera=false,mediaRecorder,recordedBlobs=[];

function updateDateTime(){
datetime.textContent=new Date().toLocaleString('en-US',{hour12:false});
}
setInterval(updateDateTime,1000);updateDateTime();

function previewVideo(){
usedLiveCamera=false;
const f=videoInput.files[0];
videoPlayer.src=URL.createObjectURL(f);
videoPlayer.style.display="block";
videoPlayer.play();
}

liveCaptureBtn.onclick=async()=>{
usedLiveCamera=true;
const stream=await navigator.mediaDevices.getUserMedia({video:true,audio:true});
liveVideo.srcObject=stream;
liveVideo.style.display="block";
stopCaptureBtn.style.display="inline-block";
recordedBlobs=[];
mediaRecorder=new MediaRecorder(stream);
mediaRecorder.ondataavailable=e=>recordedBlobs.push(e.data);
mediaRecorder.start();
};

stopCaptureBtn.onclick=()=>{
mediaRecorder.stop();
liveVideo.srcObject.getTracks().forEach(t=>t.stop());
const blob=new Blob(recordedBlobs,{type:'video/webm'});
videoPlayer.src=URL.createObjectURL(blob);
videoPlayer.style.display="block";
videoPlayer.play();
};

function convertVideo(){
let ar,en,hi;
const file=videoInput.files[0];

if(usedLiveCamera){
ar="السلام عليكم، من فضلكم أنا من ذوي الإعاقة السمعية فقط أتحدث بلغة الإشارة، أريد مساعدتكم للانتهاء من مهمتي هنا، شكراً لكم لتعاونكم.";
en="Hello, I am a person with hearing disability and I only communicate using sign language. I kindly ask for your help to complete my task here. Thank you for your cooperation.";
hi="नमस्ते, मैं श्रवण बाधित व्यक्ति हूँ और केवल सांकेतिक भाषा का उपयोग करता हूँ। कृपया मेरी सहायता करें। धन्यवाद।";
}
else if(file && file.name.includes("1")){
ar="السلام عليكم أنا إسمي عبد السلام...";
en="Hello my name is Abdelsalam...";
hi="नमस्ते मेरा नाम अब्देलसलाम है...";
}
else if(file && file.name.includes("2")){
ar="السلام عليكم من فضلك أريد حجز تذكرة طيران...";
en="I would like to book a flight ticket...";
hi="मैं फ्लाइट टिकट बुक करना चाहता हूँ...";
}
else if(file && file.name.includes("3")){
ar="السلام عليكم عندي موعد طبي...";
en="I have a medical appointment...";
hi="मेरी मेडिकल अपॉइंटमेंट है...";
}
else{
ar="لم يتم التعرف على الفيديو";
en="Unrecognized video";
hi="अमान्य वीडियो";
}

output.innerHTML=`<p>${ar}</p><p>${en}</p><p>${hi}</p>`;
speak(ar,"ar-QA",()=>speak(en,"en-US",()=>speak(hi,"hi-IN")));
}

function speak(t,l,cb){
let u=new SpeechSynthesisUtterance(t);
u.lang=l;u.onend=cb;speechSynthesis.speak(u);
}
</script>

</body>
</html>
