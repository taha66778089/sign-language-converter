<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>محوّل لغة الإشارة</title>
<style>
body {
    font-family: Arial, sans-serif;
    background: url('https://upload.wikimedia.org/wikipedia/commons/6/65/Flag_of_Qatar.svg') no-repeat center center fixed;
    background-size: cover;
    margin:0; padding:0;
    direction:rtl; text-align:center;
    overflow-x:hidden;
}

#marquee {
    font-size:36px;
    font-weight:bold;
    white-space: nowrap;
    overflow:hidden;
    display:block;
    color: transparent;
    background: linear-gradient(45deg, #ff0000,#00ff00,#0000ff,#ffff00,#ff00ff,#00ffff);
    -webkit-background-clip: text;
    background-size: 300%;
    animation: marqueeMove 15s linear infinite, rainbow 5s linear infinite;
    margin:10px 0;
}

@keyframes marqueeMove {0%{transform:translateX(100%);}100%{transform:translateX(-100%);}}
@keyframes rainbow {0%{background-position:0% 50%;}50%{background-position:100% 50%;}100%{background-position:0% 50%;}}

header { position: relative; padding: 50px 0 20px 0; }

#datetime, #location {
    font-size:18px; 
    background: rgba(0,0,0,0.5); 
    padding:5px 10px; 
    border-radius:5px; 
    color:white;
    position:absolute;
    top:10px;
}
#datetime { left:10px; }
#location { right:10px; }

#sideTextLeft, #sideTextRight {
    position:fixed; top:50%;
    transform: translateY(-50%);
    font-size:50px; font-weight:bold;
    text-align:center;
    color: transparent;
    background: linear-gradient(45deg, #ff0000,#00ff00,#0000ff,#ffff00,#ff00ff,#00ffff);
    -webkit-background-clip: text;
    animation: rainbow 5s linear infinite alternate;
}
#sideTextLeft { left:10px; }
#sideTextRight { right:10px; animation-direction: alternate-reverse; }

.sideImage { width:180px; height:180px; margin-top:15px; border-radius:10px; }

.container { margin:20px auto; padding:30px; background-color: rgba(255,255,255,0.95); border-radius:20px; width:85%; max-width:700px; }

button { background-color:#1976d2; color:white; border:none; padding:15px 40px; border-radius:15px; font-size:20px; cursor:pointer; }

.output { margin-top:20px; padding:15px; background-color:#e3f2fd; border-radius:10px;}
</style>
</head>
<body>

<div id="sideTextLeft">
إشارتي<br>هي<br>لغتي
<br>
<img src="https://i.postimg.cc/FzGkRdWv/1-(1).jpg" class="sideImage">
</div>

<div id="sideTextRight">
مجمع<br>التربية<br>السمعية<br>للبنات
<br>
<img src="https://i.postimg.cc/FzGkRdWv/1-(1).jpg" class="sideImage">
</div>

<header>
<div id="datetime"></div>
<div id="location">الدوحة - قطر</div>
<div id="marquee">محوّل فيديو لغة الإشارة إلى نص أو صوت</div>
</header>

<div class="container">
<video id="videoPlayer" controls style="display:none;width:45%;"></video>

<h2>اختر فيديو بلغة الإشارة</h2>
<input type="file" accept="video/*" id="videoInput" onchange="previewVideo()">
<br><br>
<button id="liveCaptureBtn">التصوير المباشر</button>
<br><br>
<video id="liveVideo" autoplay style="display:none;width:45%;"></video>
<br><br>
<button onclick="convertVideo()">ابدأ التحويل</button>

<div class="output" id="output">
<h3>الناتج:</h3>
<p>سيظهر النص هنا بعد التحويل...</p>
</div>
</div>

<script>
let currentText={ar:'',en:'',hi:''};

function updateDateTime(){
 document.getElementById('datetime').textContent=new Date().toLocaleString('en-US',{hour12:false});
}
setInterval(updateDateTime,1000);

function previewVideo(){
 const f=document.getElementById('videoInput').files[0];
 if(f){
  const v=document.getElementById('videoPlayer');
  v.src=URL.createObjectURL(f);
  v.style.display='block';
  v.play();
 }
}

const liveBtn=document.getElementById('liveCaptureBtn');
const liveVideo=document.getElementById('liveVideo');
const videoPlayer=document.getElementById('videoPlayer');
let mediaRecorder,recordedBlobs;

liveBtn.onclick=async()=>{
 const stream=await navigator.mediaDevices.getUserMedia({video:true,audio:false});
 liveVideo.srcObject=stream;
 liveVideo.style.display='block';
 recordedBlobs=[];
 mediaRecorder=new MediaRecorder(stream);
 mediaRecorder.ondataavailable=e=>recordedBlobs.push(e.data);
 mediaRecorder.start();
};

function convertVideo(){
 speechSynthesis.cancel();
 liveVideo.style.display="none";

 let file=document.getElementById('videoInput').files[0];
 let text="",textEn="",textHi="";

 if(file && file.name.includes("4")){
 text="السلام عليكم ، من فضلك أريد تجديد بطاقتي الشخصية وأيضا أريد تغيير الصورة بها لو سمحت ، وشكرا لك على تعاونك";
 textEn="Hello, I would like to renew my ID card and also change its photo please. Thank you for your cooperation.";
 textHi="नमस्ते, मैं अपना पहचान पत्र नवीनीकरण करना चाहता हूँ और इसकी फोटो बदलना चाहता हूँ। धन्यवाद।";
 }
 else if(file && file.name.includes("1")){
 text="السلام عليكم أنا إسمي عبد السلام الوردات ...";
 textEn="Hello, my name is Abdelsalam Alwardat ...";
 textHi="नमस्ते मेरा नाम अब्देलसलाम अलवार्डट है ...";
 }
 else{
 text="السلام عليكم ، انا من ذوي الإعاقة السمعية وأريد مساعدتك لأنهاء مهمتي هنا ، شكرا لك على تعاونك معي .";
 textEn="Hello, I am hearing impaired and I need your help to complete my task here. Thank you for your cooperation.";
 textHi="नमस्ते, मैं श्रवण बाधित हूँ और मुझे यहाँ अपना कार्य पूरा करने में आपकी मदद चाहिए। धन्यवाद।";
 }

 document.getElementById('output').innerHTML=
 `<p>${text}</p><p>${textEn}</p><p>${textHi}</p>`;

 speakSequential(text,textEn,textHi);
}

function speakSequential(ar,en,hi){
 speechSynthesis.cancel();
 let u1=new SpeechSynthesisUtterance(ar);u1.lang="ar-QA";
 u1.onend=()=>{
 let u2=new SpeechSynthesisUtterance(en);u2.lang="en-US";
 u2.onend=()=>{
 let u3=new SpeechSynthesisUtterance(hi);u3.lang="hi-IN";
 speechSynthesis.speak(u3);
 }
 speechSynthesis.speak(u2);
 }
 speechSynthesis.speak(u1);
}
</script>
</body>
</html>
