<!DOCTYPE html> 
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>محوّل لغة الإشارة</title>
<style>
body { font-family: Arial, sans-serif; background: url('https://upload.wikimedia.org/wikipedia/commons/6/65/Flag_of_Qatar.svg') no-repeat center center fixed; background-size: cover; margin:0; padding:0; direction:rtl; text-align:center; overflow-x:hidden;}
#marquee { font-size:36px; font-weight:bold; white-space: nowrap; overflow:hidden; display:block; color: transparent; background: linear-gradient(45deg, #ff0000,#00ff00,#0000ff,#ffff00,#ff00ff,#00ffff); -webkit-background-clip: text; background-size: 300%; animation: marqueeMove 15s linear infinite, rainbow 5s linear infinite; margin:10px 0; text-shadow: 1px 1px 2px rgba(0,0,0,0.5);}
@keyframes marqueeMove {0%{transform:translateX(100%);}100%{transform:translateX(-100%);}}
@keyframes rainbow {0%{background-position:0% 50%;}50%{background-position:100% 50%;}100%{background-position:0% 50%;}}
header { position: relative; padding: 50px 0 20px 0; }
#datetime, #location { font-size:18px; background: rgba(0,0,0,0.5); padding:5px 10px; border-radius:5px; color:white; position:absolute; top:10px;}
#datetime { left:10px; } #location { right:10px; }
#sideTextLeft, #sideTextRight { position:fixed; top:50%; transform: translateY(-50%); font-size:50px; font-weight:bold; text-align:center; line-height:1.3; color: transparent; background: linear-gradient(45deg, #ff0000,#00ff00,#0000ff,#ffff00,#ff00ff,#00ffff); -webkit-background-clip: text; animation: rainbow 5s linear infinite alternate;}
#sideTextLeft { left:10px; } #sideTextRight { right:10px; animation-direction: alternate-reverse; }
.sideImage { width:180px; height:180px; object-fit:cover; margin-top:15px; border-radius:10px; box-shadow:0 0 10px rgba(0,0,0,0.4); }
.container { margin:20px auto; padding:30px; background-color: rgba(255,255,255,0.95); border-radius:20px; width:85%; max-width:700px; display:flex; align-items:center; justify-content:center; flex-wrap:wrap; }
input[type="file"] { margin:20px 10px 20px 0; padding:15px 25px; font-size:18px; font-weight:bold; border:2px solid #1976d2; border-radius:10px; background-color:#2196f3; color:white; cursor:pointer; transition:0.3s, box-shadow 0.3s;}
input[type="file"]:hover { background-color:#1565c0; box-shadow: 0 0 20px #2196f3, 0 0 40px #2196f3, 0 0 60px #2196f3;}
#liveCaptureBtn { margin:20px 0; padding:15px 25px; font-size:18px; font-weight:bold; border:2px solid #1976d2; border-radius:10px; background-color:#0288d1; color:white; cursor:pointer; transition:0.3s, box-shadow 0.3s;}
#liveCaptureBtn:hover { background-color:#0277bd; box-shadow: 0 0 20px #0288d1, 0 0 40px #0288d1, 0 0 60px #0288d1;}
button { background-color:#1976d2; color:white; border:none; padding:15px 40px; border-radius:15px; font-size:20px; cursor:pointer; transition:0.3s; }
button:hover { background-color:#1565c0; }
.output { margin-top:20px; padding:15px; background-color:#e3f2fd; border-radius:10px;}
.welcome-box { margin-top:20px; padding:15px; border-radius:10px; display:flex; align-items:center; justify-content:center; gap:15px; animation:fadeIn 1s ease-in-out; color:white;}
.welcome-box img { width:60px; height:60px; animation:bounce 1s infinite; }
.welcome-text, .welcome-text-en, .welcome-text-hi { font-weight:bold; font-size:16px; margin:2px 0;}
.welcome-text-en { font-size:14px; color:#f0f0f0;}
.welcome-text-hi { font-size:14px; color:#f8f8f0;}
@keyframes fadeIn { from{opacity:0;} to{opacity:1;} }
@keyframes bounce {0%,100%{transform:translateY(0);}50%{transform:translateY(-10%);} }
#footerMarquee { font-size:28px; font-weight:bold; white-space: nowrap; overflow:hidden; display:block; color: transparent; background: linear-gradient(45deg, #ff0000,#00ff00,#0000ff,#ffff00,#ff00ff,#00ffff); -webkit-background-clip: text; background-size: 300%; animation: marqueeMove 20s linear infinite, rainbow 5s linear infinite; position:fixed; bottom:0; width:100%; text-align:center; padding:5px 0; text-shadow: 2px 2px 4px rgba(0,0,0,0.6);}
</style>
</head>
<body>

<div id="sideTextLeft">
إشارتي<br>هي<br>لغتي
<br>
<img src="https://i.postimg.cc/FzGkRdWv/1-(1).jpg" class="sideImage">
</div>

<div id="sideTextRight">
مجمع<br>التربية<br>السمعية<br>للبنات
<br>
<img src="https://i.postimg.cc/FzGkRdWv/1-(1).jpg" class="sideImage">
</div>

<header>
    <div id="datetime"></div>
    <div id="location">الدوحة - قطر</div>
    <div id="marquee">محوّل فيديو لغة الإشارة إلى نص أو صوت - مدعم بالذكاء الإصطناعي</div>
</header>

<div class="container">
<video id="videoPlayer" controls style="display:none; width:45%; margin-left:20px;"></video>

<div>
<h2>اختر فيديو بلغة الإشارة</h2>
<input type="file" accept="video/*" id="videoInput" onchange="previewVideo()">
<button id="liveCaptureBtn">التصوير المباشر</button>
<br>
<video id="liveVideo" autoplay style="display:none; width:45%; margin-top:10px;"></video>

<br>
<button onclick="convertVideo()">ابدأ التحويل</button>

<div class="welcome-box" id="welcomeBox" style="display:none;">
<img id="logoImg" src="https://i.postimg.cc/hPmktm4Q/1.jpg" alt="شعار">
<div>
<div class="welcome-text" id="welcomeText"></div>
<div class="welcome-text-en" id="welcomeTextEn"></div>
<div class="welcome-text-hi" id="welcomeTextHi"></div>
</div>
</div>

<div class="output" id="output">
<h3>الناتج:</h3>
<p>سيظهر النص هنا بعد التحويل...</p>
</div>
</div>
</div>

<div id="footerMarquee">الموقع من إعداد / طالبات مجمع التربية السمعية للبنات</div>

<script>
let currentText = {ar:'', en:'', hi:''};

function updateDateTime(){
    const now = new Date();
    document.getElementById('datetime').textContent = now.toLocaleString('en-US', {hour12:false});
}
setInterval(updateDateTime,1000); 
updateDateTime();

function previewVideo(){
    const videoInput = document.getElementById('videoInput');
    const videoPlayer = document.getElementById('videoPlayer');
    const welcomeBox = document.getElementById('welcomeBox');
    if(videoInput.files && videoInput.files[0]){
        const file = videoInput.files[0];
        const url = URL.createObjectURL(file);
        videoPlayer.src = url; videoPlayer.style.display='block';
        videoPlayer.play();
        welcomeBox.style.display='none';
        document.getElementById('output').innerHTML='<h3>الناتج:</h3><p>سيظهر النص هنا بعد التحويل...</p>';
        currentText = {ar:'', en:'', hi:''};
    }
}

// التصوير المباشر بدون زر إيقاف
const liveBtn = document.getElementById('liveCaptureBtn');
const liveVideo = document.getElementById('liveVideo');
const videoPlayer = document.getElementById('videoPlayer');
let mediaRecorder, recordedBlobs;

liveBtn.addEventListener('click', async () => {
    try {
        const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
        liveVideo.srcObject = stream;
        liveVideo.style.display = 'block';
        recordedBlobs = [];
        mediaRecorder = new MediaRecorder(stream);
        mediaRecorder.ondataavailable = event => { if(event.data && event.data.size > 0) recordedBlobs.push(event.data); };
        mediaRecorder.start();
    } catch(err) {
        alert("تعذر الوصول للكاميرا: " + err);
    }
});

function convertVideo(){
    const outputDiv = document.getElementById('output');
    const welcomeBox = document.getElementById('welcomeBox');
    const welcomeText = document.getElementById('welcomeText');
    const welcomeTextEn = document.getElementById('welcomeTextEn');
    const welcomeTextHi = document.getElementById('welcomeTextHi');
    const file = document.getElementById('videoInput').files[0] || null;
    
    // إخفاء فيديو التصوير المباشر عند التحويل
    liveVideo.style.display = 'none';

    let text="", textEn="", textHi="", welcomeMessage="", welcomeMessageEn="", welcomeMessageHi="", bgColor="";

    if(file && file.name.includes("1")){
        text="السلام عليكم أنا إسمي عبد السلام الوردات ، معلم تربية خاصة بمجمع التربية السمعية للبنين في قطر، أهلا ومرحبا بكم ، على استعداد تام لتقديم المساعدة لكم في أي وقت ، مع السلامة.";
        textEn="Hello, my name is Abdelsalam Alwardat, a special education teacher at the Deaf Education Complex for Boys in Qatar. Welcome, I am ready to assist you anytime. Goodbye.";
        textHi="नमस्ते, मेरा नाम अब्देलसलाम अलवार्डट है, मैं कतर में बॉयज़ डिफ़ एजुकेशन कॉम्प्लेक्स में विशेष शिक्षा शिक्षक हूँ। स्वागत है, मैं किसी भी समय आपकी सहायता करने के लिए तैयार हूँ। अलविदा।";
        welcomeMessage="مرحباً بكم في الفيديو الأول: رسالة عبد السلام";
        welcomeMessageEn="Welcome to Video 1: Abdelsalam's Message";
        welcomeMessageHi="वीडियो 1 में आपका स्वागत है: अब्देलसलाम का संदेश";
        bgColor="#1976d2"; 
    }
    else if(file && file.name.includes("2")){
        text="السلام عليكم من فضلك أريد حجز تذكرة طيران للذهاب للسعودية يوم الأربعاء القادم على الخطوط القطرية .. شكراً لك على تعاونك";
        textEn="Hello, please I would like to book a flight ticket to Saudi Arabia next Wednesday on Qatar Airways. Thank you for your cooperation.";
        textHi="नमस्ते, कृपया मैं अगले बुधवार को कतार एयरवेज़ पर सऊदी अरब के लिए फ्लाइट टिकट बुक करना चाहता हूँ। आपके सहयोग के लिए धन्यवाद।";
        welcomeMessage="مرحباً بكم في الفيديو الثاني: حجز تذكرة طيران";
        welcomeMessageEn="Welcome to Video 2: Flight Booking Message";
        welcomeMessageHi="वीडियो 2 में आपका स्वागत है: फ्लाइट बुकिंग संदेश";
        bgColor="#43a047"; 
    }
    else if(file && file.name.includes("3")){
        text="السلام عليكم ، من فضلك أنا اسمي حسام الدين وعندى موعد طبى اليوم مع طبيب الأسرة ، أريد رقم للدخول الى الطبيب ، شكرا لكم .";
        textEn="Hello, my name is Hossam Eldin and I have a medical appointment today with the family doctor. I need the access number to see the doctor. Thank you.";
        textHi="नमस्ते, मेरा नाम हुसाम एल्दिन है और आज मेरा परिवार के डॉक्टर के साथ चिकित्सा अपॉइंटमेंट है। मुझे डॉक्टर को देखने के लिए प्रवेश संख्या चाहिए। धन्यवाद।";
        welcomeMessage="مرحباً بكم في الفيديو الثالث: موعد طبي";
        welcomeMessageEn="Welcome to Video 3: Medical Appointment Message";
        welcomeMessageHi="वीडियो 3 में आपका स्वागत है: मेडिकल अपॉइंटमेंट संदेश";
        bgColor="#f4511e"; 
    }
    else if(file && file.name.includes("4")){
        text = "السلام عليكم  ، من فضلك أريد تجديد بطاقتي الشخصية وأيضا أريد تغيير الصورة بها لو سمحت ، وشكرا لك على تعاونك";
        textEn = "Hello, please I would like to renew my ID card and also change its photo if possible. Thank you for your cooperation.";
        textHi = "नमस्ते, कृपया मैं अपना पहचान पत्र नवीनीकरण करना चाहता हूँ और इसके फोटो को भी बदलना चाहता हूँ। आपके सहयोग के लिए धन्यवाद।";
        welcomeMessage = "مرحباً بكم في الفيديو الرابع: تجديد البطاقة الشخصية";
        welcomeMessageEn = "Welcome to Video 4: ID Card Renewal Message";
        welcomeMessageHi = "वीडियो 4 में आपका स्वागत है: पहचान पत्र नवीनीकरण संदेश";
        bgColor = "#8e24aa"; 
    }
else if(file && file.name.includes("5")){
    text = "السلام عليكم ، من فضلكم أريد سيارة إسعاف الآن بسرعة ، زوجتي مريضة جداً ولا تتحرك ، أنا في منطقة السد شارع رقم 810 ، مبنى 30 ، شقة 4 ، أرجوكم لا تتأخروا.";
    
    textEn = "Hello, please I need an ambulance immediately. My wife is very sick and cannot move. I am in Al Sadd area, Street number 810, Building 30, Apartment 4. Please do not be late.";
    
    textHi = "नमस्ते, कृपया मुझे तुरंत एम्बुलेंस चाहिए। मेरी पत्नी बहुत बीमार है और हिल नहीं पा रही है। मैं अल साद क्षेत्र में हूँ, सड़क संख्या 810, इमारत 30, अपार्टमेंट 4। कृपया देर न करें।";
    
    welcomeMessage = "مرحباً بكم في الفيديو الخامس: طلب إسعاف طارئ";
    welcomeMessageEn = "Welcome to Video 5: Emergency Ambulance Request";
    welcomeMessageHi = "वीडियो 5 में आपका स्वागत है: आपातकालीन एम्बुलेंस अनुरोध";
    
    bgColor = "#c62828"; 
}
    else if(videoPlayer.src && videoPlayer.src.includes("blob")){ 
        text="تم تسجيل الفيديو المباشر بنجاح.";
        textEn="Live video recorded successfully.";
        textHi="लाइव वीडियो सफलतापूर्वक रिकॉर्ड किया गया।";
        welcomeMessage="فيديو مباشر";
        welcomeMessageEn="Live Video";
        welcomeMessageHi="लाइव वीडियो";
        bgColor="#0288d1"; 
    }
    else{
        text = "السلام عليكم ، انا من ذوي الإعاقة السمعية وأريد مساعدتك لأنهاء مهمتي هنا ، شكرا لك على تعاونك معي .";
        textEn = "Hello, my name is hearing impaired and I need your help to complete my task here. Thank you for your cooperation.";
        textHi = "नमस्ते, मैं श्रवण बाधित हूँ और मुझे यहाँ अपना कार्य पूरा करने में आपकी मदद चाहिए। आपके सहयोग के लिए धन्यवाद।";
        welcomeMessage = "فيديو غير معروف";
        welcomeMessageEn = "Unknown Video";
        welcomeMessageHi = "अज्ञात वीडियो";
        bgColor = "#9e9e9e"; 
    }

    currentText.ar = text;
    currentText.en = textEn;
    currentText.hi = textHi;

    welcomeBox.style.display="flex";
    welcomeBox.style.backgroundColor = bgColor;
    welcomeText.textContent = welcomeMessage;
    welcomeTextEn.textContent = welcomeMessageEn;
    welcomeTextHi.textContent = welcomeMessageHi;

    outputDiv.innerHTML = `<h3>الناتج:</h3>
    <p style="font-size:18px;font-weight:bold;">${text}</p>
    <p style="font-size:16px;color:gray;">${textEn}</p>
    <p style="font-size:16px;color:gray;">${textHi}</p>`;

    speakSequential(currentText.ar, currentText.en, currentText.hi);
}

// صوت موحد ونقي لجميع الفيديوهات والرسائل العامة
function speakSequential(arText, enText, hiText){
    if(!arText && !enText && !hiText) return;

    speechSynthesis.cancel();

    const arUtter = new SpeechSynthesisUtterance(arText);
    arUtter.lang = "ar-QA";
    arUtter.rate = 1.0; arUtter.pitch = 1.0; arUtter.volume = 1.0;

    arUtter.onend = ()=>{
        if(enText){
            const enUtter = new SpeechSynthesisUtterance(enText);
            enUtter.lang = "en-US";
            enUtter.rate = 1.2; enUtter.pitch = 1.0; enUtter.volume = 1.0;

            enUtter.onend = ()=>{
                if(hiText){
                    const hiUtter = new SpeechSynthesisUtterance(hiText);
                    hiUtter.lang = "hi-IN";
                    hiUtter.rate = 1.05; hiUtter.pitch = 1.0; hiUtter.volume = 1.0;
                    speechSynthesis.speak(hiUtter);
                }
            }
            speechSynthesis.speak(enUtter);
        }
    };

    speechSynthesis.speak(arUtter);
}
</script>
</body>
</html>
